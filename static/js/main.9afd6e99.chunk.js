(this["webpackJsonplog-extraction"]=this["webpackJsonplog-extraction"]||[]).push([[0],{21:function(e,a,r){e.exports=r(46)},26:function(e,a,r){},46:function(e,a,r){"use strict";r.r(a);var t=r(0),n=r.n(t),o=r(18),s=r.n(o),i=(r(26),r(54)),c=r(19),l=r(5),d=r(1),u=r(20),h=r(4),f=r.n(h),g=f.a.create({baseURL:"https://classic.warcraftlogs.com:443/v1/"}),p=function(e){return e.params=Object(u.a)({},e.params,{api_key:"ce3902772ae4b70c973b6a9f54f844fd"}),g(e).then((function(e){return e.data})).catch((function(e){return Promise.reject(e.response||e.message)}))},m=function e(){var a=this;Object(l.a)(this,e),this.zones=[],this.getZoneName=function(e){var r="";return a.zones.forEach((function(a){a.id===e&&(r=a.name)})),r}};Object(d.h)(m,{zones:d.m});var v=m,b=function e(){var a,r,t,n=this;Object(l.a)(this,e),this.raidsById={},this.fightsByRaidId={},this.parsesByRaider={},this.zones={},this.loading=!0,this.loadingBracketParses=!0,this.loadingOverallParses=!0,this.loadingZones=!0,this.medianBracket=[],this.bestBracket=[],this.medianOverall=[],this.bestOverall=[],this.updateWhenFinished=Object(d.n)((function(){return n.loadingBracketParses||n.loadingOverallParses||n.loadingZones}),(function(){n.loadingBracketParses||n.loadingOverallParses||n.loadingZones||(n.end=Date.now(),console.log("done loading, time elapsed: ",n.end-n.start),Object.keys(n.parsesByRaider).forEach((function(e){var a={name:e},r={name:e},t={name:e},o={name:e};n.parsesByRaider[e].bracket&&Object.keys(n.parsesByRaider[e].bracket).forEach((function(t){var o=0,s=0,i=0;n.parsesByRaider[e].bracket[t].forEach((function(e){e>o&&(o=e),s+=e,i+=1})),s/=i,a[t]=Number.isInteger(o)?o:o.toFixed(2),r[t]=Number.isInteger(s)?s:s.toFixed(2)})),n.parsesByRaider[e].overall&&Object.keys(n.parsesByRaider[e].overall).forEach((function(a){var r=0,s=0,i=0;n.parsesByRaider[e].overall[a].forEach((function(e){e>r&&(r=e),s+=e,i+=1})),s/=i,t[a]=Number.isInteger(r)?r:r.toFixed(2),o[a]=Number.isInteger(s)?s:s.toFixed(2)})),n.bestBracket.push(a),n.medianBracket.push(r),n.bestOverall.push(t),n.medianOverall.push(o)})),n.loading=!1,localStorage.setItem("raids",JSON.stringify(n.raidsById)),localStorage.setItem("fights",JSON.stringify(n.fightsByRaidId)),localStorage.setItem("parses",JSON.stringify(n.parsesByRaider)))})),this.storageRaidsById=null!==(a=JSON.parse(localStorage.getItem("raids")))&&void 0!==a?a:{},this.fightsByRaidId=null!==(r=JSON.parse(localStorage.getItem("fights")))&&void 0!==r?r:{},this.parsesByRaider=null!==(t=JSON.parse(localStorage.getItem("parses")))&&void 0!==t?t:{},this.start=Date.now();var o=this.start-24192e5;p({url:"/zones"}).then((function(e){n.zones=e,n.loadingZones=!1})),p({url:"/reports/guild/RIVAL/Fairbanks/US"}).then((function(e){console.log("have guild fights");var a=[];Object.values(e).forEach((function(e,r){if(e.end-e.start>0){var t=new Date(e.start).getDay();n.raidsById[e.id]=e,e.start>o&&(3===t||4===t)&&1002===e.zone&&a.push(e.id)}}));var r=Object.keys(n.storageRaidsById),t=!1;if(a.forEach((function(e){r.includes(e)||(t=!0)})),t){console.log("grabbing data from warcraft logs");var s=[];a.forEach((function(e){s.push(p({url:"/report/fights/".concat(e)}))})),f.a.all(s).then(f.a.spread((function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];var t=[];Object.values(n.raidsById).forEach((function(e){a.forEach((function(a){n.fightsByRaidId[e.id]=a,e.start===a.start&&e.title===a.title&&t.push(a)}))})),t.forEach((function(e){e.exportedCharacters.forEach((function(e){n.parsesByRaider[e.name]={}}))}));var s=[],i=Object.keys(n.parsesByRaider);console.log("raiders found:",i.length);for(var c=0;c<i.length;c++){var l=i[c];s.push(p({url:"/parses/character/".concat(l,"/Fairbanks/US"),params:{bracket:-1}}))}for(var d=[],u=0;u<i.length;u++){var h=i[u];d.push(p({url:"/parses/character/".concat(h,"/Fairbanks/US")}))}f.a.all(s).then(f.a.spread((function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];a.forEach((function(e){if(e[0]){var a=e[0].characterName;n.parsesByRaider[a].bracket={},e.filter((function(e){return e.startTime>o})).forEach((function(e){n.parsesByRaider[a].bracket[e.encounterID]||(n.parsesByRaider[a].bracket[e.encounterID]=[]),n.parsesByRaider[a].bracket[e.encounterID].push(e.percentile)}))}})),n.loadingBracketParses=!1}))).catch((function(e){console.log(e),n.loadingBracketParses=!1})),f.a.all(d).then(f.a.spread((function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];a.forEach((function(e){if(e[0]){var a=e[0].characterName;n.parsesByRaider[a].overall={},e.filter((function(e){return e.startTime>o})).forEach((function(e){n.parsesByRaider[a].overall[e.encounterID]||(n.parsesByRaider[a].overall[e.encounterID]=[]),n.parsesByRaider[a].overall[e.encounterID].push(e.percentile)}))}})),n.loadingOverallParses=!1}))).catch((function(e){console.log(e),n.loadingOverallParses=!1}))})))}else n.loadingBracketParses=!1,n.loadingOverallParses=!1}))};Object(d.h)(b,{loading:d.m,loadingBracketParses:d.m,loadingOverallParses:d.m,loadingZones:d.m,bestBracket:d.m,medianBracket:d.m,bestOverall:d.m,medianOverall:d.m,zones:d.m});var B=b,y=n.a.createContext({zoneStore:new v,raidStore:new B}),k=Object(i.a)({li:{padding:"2px 0px","&.selected:hover":{backgroundColor:"#85929E"},"&.selected:active":{backgroundColor:"#5D6D7E"},"&.selected":{backgroundColor:"#AEB6BF"},"&:hover":{backgroundColor:"#EBEDEF"},"&:active":{backgroundColor:"#D6DBDF"}},p:{margin:"2px 0px"}}),E=Object(c.a)((function(){k();var e=n.a.useContext(y),a=e.raidStore,r=(e.zoneStore,function(e){var a="black";return 100===e?a="#F4D03F":e>=95&&e<100?a="#F39C12":e>=75&&e<95?a="#8E44AD":e>=50&&e<75?a="#3498DB":e>=25&&e<50?a="#2ECC71":e>=0&&e<25&&(a="#BDC3C7"),a}),t=function(e){var t=a.zones.find((function(e){return 1002===e.id})),o=["Raider"];t.encounters.forEach((function(e){o.push(e.name)}));var s=[];return e.forEach((function(e){var a=[e.name];t.encounters.forEach((function(r){var t;a.push(null!==(t=e[r.id])&&void 0!==t?t:"-")})),s.push(a)})),n.a.createElement("table",{style:{borderCollapse:"collapse"}},n.a.createElement("thead",null,n.a.createElement("tr",null,o.map((function(e){return n.a.createElement("th",{style:{padding:"5px",textAlign:"left",fontWeight:"bold",backgroundColor:"#5D6D7E",color:"white",border:"1px solid black"}},e)})))),n.a.createElement("tbody",null,s.map((function(e){return n.a.createElement("tr",null,e.map((function(e){return n.a.createElement("td",{style:{padding:"0px 5px",border:"1px solid black",color:"".concat(r(e))}},e)})))}))))};return n.a.createElement("div",null,a.loading?"Loading...":n.a.createElement("div",null,n.a.createElement("h1",null,"Median Bracket:"),t(a.medianBracket),n.a.createElement("h1",null,"Best Bracket:"),t(a.bestBracket),n.a.createElement("h1",null,"Median Overall:"),t(a.medianOverall),n.a.createElement("h1",null,"Best Overall:"),t(a.bestOverall)))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.9afd6e99.chunk.js.map