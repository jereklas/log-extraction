(this["webpackJsonplog-extraction"]=this["webpackJsonplog-extraction"]||[]).push([[0],{21:function(e,a,t){e.exports=t(43)},26:function(e,a,t){},43:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(16),i=t.n(s),o=(t(26),t(19)),l=t(17),c=t(18),u=t(1),d=t(4),m=t.n(d),h=t(20),p=m.a.create({baseURL:"https://classic.warcraftlogs.com:443/v1/"}),f=function(e){return e.params=Object(h.a)({},e.params,{api_key:"ce3902772ae4b70c973b6a9f54f844fd"}),p(e).then((function(e){return console.debug("Request Successful!",e),e.data})).catch((function(e){return console.error("Request Failed:",e.config),e.response?(console.error("Status:",e.response.status),console.error("Data:",e.response.data),console.error("Headers:",e.response.headers)):console.error("Error Message:",e.message),Promise.reject(e.response||e.message)}))},g={lastSeenRaids:"previousRaids-v2",parsesByRaider:"parsesByRaider-v2"};Object.freeze(g);var b=function(){function e(){var a,t=this;Object(l.a)(this,e),this.raidsToGetFightsFor=[],this.parsesByRaider={},this.zones={},this.loading=!0,this.loadingBracketParses=!0,this.loadingOverallParses=!0,this.loadingZones=!0,this.needToGetData=!1,this.error="",this.timeRemaining=0,this.medianBracket=[],this.bestBracket=[],this.medianOverall=[],this.bestOverall=[],this.healerTypes=["Priest","Paladin","Druid"],this.healerExclusionList=["Lightsaber","Neku","Taede"],this.healers=[],this.isRaidDataOutOfDate=function(){var e=JSON.parse(localStorage.getItem(g.lastSeenRaids)),a=!1;return!e&&t.raidsToGetFightsFor.length>0?a=!0:t.raidsToGetFightsFor.forEach((function(t){e.includes(t)||(a=!0)})),a},this.findRaids=function(e,a,n){return e.filter((function(e){return e.start>Date.now()-6048e5*n&&e.zone===t.getZoneId(a)})).map((function(e){return e.id}))},this.findRaiders=function(e){var a=[];t.raids.forEach((function(t){e.forEach((function(e){t.start===e.start&&t.title===e.title&&a.push(e)}))})),a.forEach((function(e){e.exportedCharacters.forEach((function(a){var n=e.friendlies.find((function(e){return e.name===a.name}));!t.healerTypes.includes(n.type)||t.healerExclusionList.includes(n.name)||t.healers.includes(n.name)||t.healers.push(n.name),t.parsesByRaider[a.name]={}}))}))},this.handleParseRequests=function(e,a,n,r){var s=t.start-36288e5;setTimeout((function(){m.a.all(e).then(m.a.spread((function(){for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];a.forEach((function(e){if(e[0]){var a=e[0].characterName;t.parsesByRaider[a][n]={},e.forEach((function(e){var r=t.parsesByRaider[a][n];r[e.encounterID]||(r[e.encounterID]={numberOfEncounters:0,best:0,parses:[]}),e.startTime>s&&(r[e.encounterID].numberOfEncounters+=1,r[e.encounterID].parses.push(e.percentile)),r[e.encounterID].best<e.percentile&&(r[e.encounterID].best=e.percentile)}))}})),t[r]=!1}))).catch((function(){t.error="There were too many requests made recently to WarcraftLogs. Try again in like 10 minutes to allow my api key to becoming unlocked and then try re-loading the page.",t[r]=!1}))}),2e3*(a.length+2))},this.updateWhenFinished=Object(u.n)((function(){return t.loadingBracketParses||t.loadingOverallParses||t.loadingZones}),(function(){t.loadingBracketParses||t.loadingOverallParses||t.loadingZones||(console.log("done loading, time elapsed: ".concat((Date.now()-t.start)/1e3,"s")),Object.keys(t.parsesByRaider).sort().forEach((function(e){var a={name:e},n={name:e},r={name:e},s={name:e},i=t.parsesByRaider[e].bracket;i&&Object.keys(i).forEach((function(e){var t=i[e],r=0;t.parses.forEach((function(e){r+=e})),r/=t.parses.length,a[e]=Number.isInteger(t.best)?t.best:t.best.toFixed(2),n[e]=Number.isNaN(r)?"-":Number.isInteger(r)?r:r.toFixed(2)}));var o=t.parsesByRaider[e].overall;o&&Object.keys(o).forEach((function(e){var a=o[e],t=0;a.parses.forEach((function(e){t+=e})),t/=a.parses.length,r[e]=Number.isInteger(a.best)?a.best:a.best.toFixed(2),s[e]=Number.isNaN(t)?"-":Number.isInteger(t)?t:t.toFixed(2)})),t.bestBracket.push(a),t.medianBracket.push(n),t.bestOverall.push(r),t.medianOverall.push(s)})),t.loading=!1,localStorage.setItem(g.lastSeenRaids,JSON.stringify(t.raidsToGetFightsFor)),localStorage.setItem(g.parsesByRaider,JSON.stringify(t.parsesByRaider)))})),this.parsesByRaider=null!==(a=JSON.parse(localStorage.getItem(g.parsesByRaider)))&&void 0!==a?a:{},this.start=Date.now(),f({url:"/zones"}).then((function(e){t.zones=e,t.loadingZones=!1})),Object(u.n)((function(){return t.loadingZones}),(function(){f({url:"/reports/guild/RIVAL/Fairbanks/US"}).then((function(e){t.raids=e,t.raidsToGetFightsFor=t.findRaids(e,"Blackwing Lair",4),t.needToGetData=t.isRaidDataOutOfDate(),t.needToGetData||(t.loadingBracketParses=!1,t.loadingOverallParses=!1)}))})),Object(u.n)((function(){return t.needToGetData}),(function(){var e=[];t.raidsToGetFightsFor.forEach((function(a){e.push(f({url:"/report/fights/".concat(a)}))})),m.a.all(e).then(m.a.spread((function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];t.findRaiders(a);var r=[],s=Object.keys(t.parsesByRaider),i=Math.floor(2e3*(s.length+3)/1e3);t.timeRemaining=i;for(var o=0;o<i;o++)setTimeout((function(){t.timeRemaining=t.timeRemaining-1}),1e3*o);for(var l=function(e){setTimeout((function(){var a=s[e];r.push(f({url:"/parses/character/".concat(a,"/Fairbanks/US"),params:{bracket:-1,zone:t.getZoneId("Blackwing Lair"),metric:t.healers.includes(s[0])?"hps":"dps"}}))}),2e3*e)},c=0;c<s.length;c++)l(c);for(var u=[],d=function(e){setTimeout((function(){var a=s[e];u.push(f({url:"/parses/character/".concat(a,"/Fairbanks/US"),zone:t.getZoneId("Blackwing Lair"),params:{metric:t.healers.includes(a)?"hps":"dps"}}))}),2e3*e)},m=0;m<s.length;m++)d(m);t.handleParseRequests(r,s,"bracket","loadingBracketParses"),t.handleParseRequests(u,s,"overall","loadingOverallParses")})))}))}return Object(c.a)(e,[{key:"getZoneId",value:function(e){return this.zones.find((function(a){return a.name===e})).id}},{key:"getZone",value:function(){return this.zones.find((function(e){return"Blackwing Lair"===e.name}))}},{key:"getPartitionName",value:function(){return this.zones.find((function(e){return"Blackwing Lair"===e.name})).partitions[2].name}}]),e}();Object(u.h)(b,{error:u.m,healers:u.m,loading:u.m,loadingBracketParses:u.m,loadingOverallParses:u.m,needToGetData:u.m,timeRemaining:u.m,loadingZones:u.m,bestBracket:u.m,medianBracket:u.m,bestOverall:u.m,medianOverall:u.m});var v=b,E=r.a.createContext({raidStore:new v}),y=Object(o.a)((function(){var e=r.a.useContext(E).raidStore,a=function(e){var a="black";return 100===e?a="#F4D03F":e>=95&&e<100?a="#F39C12":e>=75&&e<95?a="#8E44AD":e>=50&&e<75?a="#3498DB":e>=25&&e<50?a="#2ECC71":e>=0&&e<25&&(a="#BDC3C7"),a},t=function(t){var n=e.getZone(),s=["Raider","Average"];n.encounters.forEach((function(e){s.push(e.name)}));var i=[];return t.forEach((function(e){var a=[e.name],t=[],r=0,s=0;n.encounters.forEach((function(a){var n,i=null!==(n=e[a.id])&&void 0!==n?n:"-";i&&"-"!==i&&(r+=Number(i),s+=1),t.push(i)})),0!==r?a.push((r/s).toFixed(2)):a.push("-"),t.forEach((function(e){return a.push(e)})),i.push(a)})),r.a.createElement("table",{style:{borderCollapse:"collapse",margin:"3px 5px"}},r.a.createElement("thead",null,r.a.createElement("tr",null,s.map((function(e){return r.a.createElement("th",{key:e,style:{padding:"5px",textAlign:"left",fontWeight:"bold",backgroundColor:"#5D6D7E",color:"white",border:"1px solid black"}},e)})))),r.a.createElement("tbody",null,i.map((function(e){return r.a.createElement("tr",null,e.map((function(e){return r.a.createElement("td",{style:{padding:"0px 5px",border:"1px solid black",color:"".concat(a(e))}},e)})))}))))};return r.a.createElement("div",null,e.loading?r.a.createElement("div",null,r.a.createElement("p",{style:{margin:"5px"}},"Due to WarcraftLog's API request limit, loading will take about 2 minutes."),e.timeRemaining>0&&r.a.createElement("p",{style:{margin:"5px"}},"Estimated time remaining: ".concat(e.timeRemaining,"s"))):""!==e.error?"ERROR: ".concat(e.error):r.a.createElement("div",null,r.a.createElement("p",{style:{margin:"5px 0px 5px 5px"}},r.a.createElement("b",null,"Zone:")," ".concat(e.getZone().name)),r.a.createElement("p",{style:{margin:"0px 5px"}},r.a.createElement("b",null,"Partition:")," ".concat(e.getPartitionName())),r.a.createElement("p",{style:{margin:"5px"}},r.a.createElement("b",null,"Details:")," Druids, Paladins, and Priests have healing parses pulled. The following people are excluded from that: ".concat(e.healerExclusionList.sort().join(", "))),r.a.createElement("p",{style:{margin:"15px 5px 7px 5px"}},r.a.createElement("b",null,"Median Bracket:")),t(e.medianBracket),r.a.createElement("p",{style:{margin:"7px 5px"}},r.a.createElement("b",null,"Best Bracket:")),t(e.bestBracket),r.a.createElement("p",{style:{margin:"7px 5px"}},r.a.createElement("b",null,"Median Overall:")),t(e.medianOverall),r.a.createElement("p",{style:{margin:"7px 5px"}},r.a.createElement("b",null,"Best Overall:")),t(e.bestOverall)))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.93ff1148.chunk.js.map